<html><head><title>Wiki: Fit Specification</title></head>
<body bgcolor="#ffffff" link="#d06040" vlink="#806040">
<h1><a href="http://192.168.2.114/fit/search.cgi?search=FitSpecification">Fit Specification</a></h1>
<wiki>Here we describe the framework in sufficient precision to be
useful to framework implementors. We will use the framework to test
itself. This leads to circular logic that can be unraveled more easily
by the computer than a beginner learning the framework. Beginners might
want to <a href="http://192.168.2.114/fit/wiki.cgi?ReadMore">ReadMore</a> of this site before continuing here.
</wiki><p>Each of the following sections will become a specification
document in its own right. Each bullet with a section is to become the <a href="http://192.168.2.114/fit/wiki.cgi?FitAcceptanceTests">FitAcceptanceTests</a>.
</p><p><a href="http://localhost:8080/cgi-bin/run.cgi">http://localhost:8080/cgi-bin/run.cgi</a>
</p><p><a href="http://192.168.2.114/fit/run.cgi">http:run.cgi</a>
</p><p></p><hr>
<p><strong>Parse</strong>
</p><p>A parser builds an in memory model of an html document. The
model preserves all of the content while exposing table data to further
processing. This allows input to be prepared with a variety of tools. </p><p></p><ul>
<li> word tables
</li><li> excel tables
</li><li> wiki tables
<p></p></li></ul> Tables are sometimes used to format html pages, as is
the case with wiki. In this case a unique tag, &lt;wiki&gt;, is used to
surround the tables that are to be parsed as tests. <p></p><ul>
<li> wiki tables within table
<p></p></li></ul>
The visible text within a cell is extracted and treated as a string, free of formatting.
<p></p><ul>
<li> markup tags
</li><li> character escapes
</li><li> leading and trailing spaces
<p></p></li></ul>
The parsed tables can be modified in memory and a revised document written.
<p></p><ul>
<li> cell background color
</li><li> cell contents
</li><li> additional rows
</li><li> additional columns
<p></p></li></ul>
<hr>
<p><strong>Check</strong>
</p><p>Expected values specified in cells are tested for equality with actual values extracted from the program under test.
</p><p><table border="1" cellspacing="0" cellpadding="3">
<tbody><tr><td colspan="4"> fat.Equals </td></tr>
<tr><td> type </td><td> x </td><td> y </td><td> = </td></tr>
<tr><td> boolean </td><td> true </td><td> TRUE </td><td> true </td></tr>
<tr><td> integer </td><td> 00001 </td><td> 1 </td><td> true </td></tr>
<tr><td> real </td><td> 1000 </td><td> 1e3 </td><td> true </td></tr>
<tr><td> string </td><td> abc </td><td> ABC </td><td> false </td></tr>
<tr><td> string </td><td> a b   c </td><td> a   b c </td><td> true </td></tr>
</tbody></table>
</p><p>A sequence of values can be entered and checked as a single (composite) value.
</p><p><table border="1" cellspacing="0" cellpadding="3">
<tbody><tr><td colspan="5"> fat.Equals </td></tr>
<tr><td> type </td><td> x </td><td> y </td><td> = </td></tr>
<tr><td> integers </td><td> 1, 3, 5 </td><td> 01,03,05 </td><td> true </td></tr>
<tr><td> integers </td><td> 1, 3, 5 </td><td> 01,05,03 </td><td> false </td></tr>
<tr><td> booleans </td><td> true, true, false </td><td> true, false </td><td> false </td></tr>
<tr><td> strings </td><td> a , b , c </td><td> a,b,c </td><td> true </td></tr>
</tbody></table>
</p><p></p><p>Domain values can be constructed from cell contents.
Equality comparisons will be subject to appropriate domain rules (i.e.
delegated to the domain objects.) </p><p><table border="1" cellspacing="0" cellpadding="3">
<tbody><tr><td colspan="4"> fat.Equals </td></tr>
<tr><td> type </td><td> x </td><td> y </td><td> = </td></tr>
<tr><td> date </td><td> Jan 1, 1995 </td><td> January 1, 1995 </td><td> true </td></tr>
<tr><td> money </td><td> $10000 </td><td> $10,000.00 </td><td> true </td></tr>
</tbody></table>
</p><p></p><p>Floating point numbers are checked to the precision that
is normal in the host language. It is possible for a domain object to
infer precision from the string representation of expected values. For
example, <a href="http://192.168.2.114/fit/edit.cgi?ScientificDouble">?</a>ScientificDouble checks equality to the precision implied by the number of significant digits in a value.
</p><p></p><ul>
<li> non-zeros -- 123.45 is 5 digits
</li><li> zeros between non-zeros -- 100003 is 6 digits
</li><li> zeros in the fraction part -- 12.20 is 4 digits
</li><li> but not leading zeros -- 0001000 is 4 digits
</li><li> and not exponent digits -- 6.02e23 is 3 digits
</li><li> left argument (receiver) controles precision
<p></p></li></ul>
<table border="1" cellspacing="0" cellpadding="3">
<tbody><tr><td colspan="4"> fat.Equals </td></tr>
<tr><td> type </td><td> x </td><td> y </td><td> = </td></tr>
<tr><td> real </td><td> 123.45 </td><td> 123.449 </td><td> false </td></tr>
<tr><td> scientific </td><td> 123.45 </td><td> 123.449 </td><td> true </td></tr>
<tr><td> scientific </td><td> 100003 </td><td> 100003.1 </td><td> true </td></tr>
<tr><td> scientific </td><td> 100003.1 </td><td> 100003 </td><td> false </td></tr>
<tr><td> scientific </td><td> 12.20 </td><td> 12.210 </td><td> false </td></tr>
<tr><td> scientific </td><td> 12.21 </td><td> 12.210 </td><td> true </td></tr>
</tbody></table>
<p></p><p>Improperly specified values may throw exceptions which are
reported in the cell that contains the invalid number. Improper value
detection is only as good as would be expected in the host language.
(We are assuming that incorrectly converted values will lead to
detected errors elsewhere.) </p><p></p><ul>
<li> xyz is not an integer
</li><li> 10000000000000000000000000 may or may not be an integer
<p></p></li></ul>
<table border="1" cellspacing="0" cellpadding="3">
<tbody><tr><td colspan="3"> fat.Table </td></tr>
<tr><td> fat.Equals </td><td> </td></tr>
<tr><td> type </td><td> x </td></tr>
<tr><td> integer </td><td> 200 </td></tr>
<tr><td> integer </td><td> xyz </td></tr>
</tbody></table>
<p><table border="1" cellspacing="0" cellpadding="3">
<tbody><tr><td colspan="3"> fat.Color </td></tr>
<tr><td> white </td><td> white </td></tr>
<tr><td> white </td><td> white </td></tr>
<tr><td> white </td><td> white </td></tr>
<tr><td> white </td><td> yellow </td></tr>
</tbody></table>
</p><p>Some character strings have special meaning outside of type conversion.
</p><p></p><ul>
<li> blank -- omit check, report value (reported in gray letters)
</li><li> error -- expect an error
<p></p></li></ul>
<table border="1" cellspacing="0" cellpadding="3">
<tbody><tr><td colspan="3"> fat.Table </td></tr>
<tr><td> fat.Divide </td><td> </td><td> </td></tr>
<tr><td> x </td><td> y </td><td> divide() </td></tr>
<tr><td> 100 </td><td> 2 </td><td> 50 </td></tr>
<tr><td> 100 </td><td> 2 </td><td> </td></tr>
<tr><td> 100 </td><td> 0 </td><td> error </td></tr>
<tr><td> 100 </td><td> 0 </td><td> </td></tr>
</tbody></table>
<table>
<tr><td> fat.Divide </td><td> </td><td> </td></tr>
<tr><td> x </td><td> y </td><td> divide() </td></tr>
<tr><td> 100 </td><td> 2 </td><td> 50 </td></tr>
<tr><td> 100 </td><td> 2 </td><td> </td></tr>
<tr><td> 100 </td><td> 0 </td><td> error </td></tr>
<tr><td> 100 </td><td> 0 </td><td> </td></tr>
</table>
<p><table border="1" cellspacing="0" cellpadding="3">
<tbody><tr><td colspan="3"> fat.Color </td></tr>
<tr><td> white </td><td> white </td><td> white </td></tr>
<tr><td> white </td><td> white </td><td> white </td></tr>
<tr><td> white </td><td> white </td><td> green </td></tr>
<tr><td> white </td><td> white </td><td> gray/white </td></tr>
<tr><td> white </td><td> white </td><td> green </td></tr>
<tr><td> white </td><td> white </td><td> gray/white </td></tr>
</tbody></table>
</p><p>The framework looks for parse support in different places.
</p><p></p><ul>
<li> fixture
</li><li> domain object
</li><li> type adapter
<p></p></li></ul>
The framework will allow fixtures to implement custom parsing.
<p></p><ul>
<li> yea = true
</li><li> nay = false
<p></p><p></p></li></ul>
<hr>
<p><strong>Fixture</strong>
</p><p>The first cell of a table specifies how that table will be
interpreted. Normally this is the name of an object, a Fixture, that is
specifically written for this purpose. </p><p></p><ul>
<li> case Foo != foo
</li><li> package alpha.Foo != beta.Foo
<p></p></li></ul> By default cells are processed in order, by table, by
row within tables, and by cell within rows. Distinct routines handle
sequencing (plural) and interpretation (singular). <p></p><ul>
<li> doTables -- sequence tables within a document
</li><li> doTable -- interpret a table
</li><li> doRows -- sequence rows within a table
</li><li> doRow -- interpret a row
</li><li> doCells -- sequence cells within a row
</li><li> doCell -- interpret a row
<p></p></li></ul>
The default interpretation of a cell is to mark it as ignored.
<p>Cells contain givens or expected results. The fixture is responsible
for distinguishing givens from expected results, checking expected
results against actuals, and indicating the result with the background
annotation as follows. </p><p></p><ul>
<li> white -- no check wanted (blank input)
</li><li> green -- right: expected equals actual
</li><li> red -- wrong: expected not equal actual
</li><li> yellow -- exception: trouble computing actual or comparing result
</li><li> gray -- ignore: desired check not possible
<p></p></li></ul>
Fixtures cooperate to count the number of each result.
<p></p><ul>
<li> counts accumulate between tables
</li><li> counts are summarized as "# right, # wrong, # exceptions, # ignores".
</li><li> runner fixtures (e.g. <a href="http://192.168.2.114/fit/wiki.cgi?AllFiles">AllFiles</a>) can control accumulation of counts
<p></p></li></ul>
Fixtures cooperate to accumulate state that can be summarized at any point in the processing of a document.
<p></p><ul>
<li> state variables
</li><li> state lifetime
</li><li> state summary
<p></p></li></ul>
<hr>
<p><strong><a href="http://192.168.2.114/fit/wiki.cgi?PrimitiveFixture">PrimitiveFixture</a></strong>
</p><p>The primitive fixture does not depend on <a href="http://192.168.2.114/fit/wiki.cgi?TypeAdapter">TypeAdapter</a>. Type specific functions handle all checking.
</p><p></p><ul>
<li> checkBoolean
</li><li> checkInteger
</li><li> checkFloat
</li><li> checkString
<p></p><p></p></li></ul>
<hr>
<p><strong><a href="http://192.168.2.114/fit/wiki.cgi?ColumnFixture">ColumnFixture</a></strong>
</p><p>A column fixture distinguishes givens from expected values by the form of the column head.
</p><p></p><ul>
<li> name is setter or field
</li><li> name() is getter or field
</li><li> camel case -- present value ( ) = presentValue()
</li><li> deprecate execute()
<p></p></li></ul>
<hr>
<p><strong><a href="http://192.168.2.114/fit/wiki.cgi?RowFixture">RowFixture</a></strong>
</p><p>A row fixture expects all rows to be expected values. The
fixture is assumed to have access to actual rows which it pairs with
expected rows. </p><p></p><ul>
<li> name is field or getter
</li><li> name() is getter
</li><li> camel case
<p></p></li></ul>
Rows are matched by comparing just enough values from the left most columns to get a unique match.
<p></p><ul>
<li> some given, none actual -- missing row
</li><li> none given, some actual -- surplus rows
</li><li> one given, one actual -- check remaining columns
</li><li> many given, many actual -- match on more columns
<p></p></li></ul>
Missing and surplus rows are marked as such in their first column
<p></p><ul>
<li> each counts as one wrong
</li><li> surplus rows added to table in gray
<p></p></li></ul>
<hr>
<p><strong><a href="http://192.168.2.114/fit/wiki.cgi?ActionFixture">ActionFixture</a></strong>
</p><p>An action fixture distinguishes given from expected values based on keywords in the first column.
</p><p></p><ul>
<li> enter -- put given in setter or field
</li><li> check -- check value with getter or field
</li><li> press -- call action (no check other than for execptions)
</li><li> start -- new actor
<p></p></li></ul> An actor represents some interface state such as the
currently active window. The actor gives meaning to many of the words
in the second column (field to be entered and buttons to be pressed). <p></p><ul>
<li> actor persists between tables
</li><li> initial actor is action fixture (subclass) itself
</li><li> start with no argument specifies initial actor
<p></p></li></ul>
Start could have various meanings depending on the nature of the interface being modeled.
<p></p><ul>
<li> create a new actor
</li><li> return to an existing actor
<p></p></li></ul>
Other actions, like press, can change the current actor.
<p></p><ul>
<li> replace the current actor with a new actor
</li><li> replace the current actor with another preexisting actor
</li><li> restore the previous actor
<p></p></li></ul>
Subclasses of action fixture can add new action words.
<p></p><ul>
<li> camel case
<p></p></li></ul>
<hr>
<p><strong>Runner</strong>
</p><p>A runner creates top-level Fixtures and provides them with parsed documents to be annotated.
</p><p></p><ul>
<li> top-level fixture is instance of Fixture
<p></p></li></ul>
A runner retrieves and disposes of documents as appropriate to its environment. The <a href="http://192.168.2.114/fit/wiki.cgi?FileRunner">FileRunner</a> reads and writes html files.
<p></p><ul>
<li> input-file only -- default output
</li><li> input-file output-file -- specific output
</li><li> input-directory only -- default output in directory
</li><li> input-directory output-directory -- default outputs in specific directory
</li><li> index.html result summaries
</li><li> - is standard in/out
<p></p></li></ul>
A runner signals the presence of errors to its environment so that subsequent processing can be triggered.
<p></p><ul>
<li> exit status is sum of wrong and exceptions up to 255
</li><li> main is factored to simplify <a href="http://192.168.2.114/fit/edit.cgi?RunnerFixtures">?</a>RunnerFixtures
<p></p></li></ul>
A runner establishes run specific state that may influence loading and/or configuration of the program under test.
<p></p><ul>
<li> <a href="http://192.168.2.114/fit/edit.cgi?AssemblyPath">?</a>AssemblyPath ???
<p></p></li></ul>
<table border="1" cellspacing="0" cellpadding="3">
<tbody><tr><td colspan="2"> fit.Summary </td></tr></tbody></table><p>
	</p><form method="post" action="edit.cgi?FitSpecification">
	<input type="submit" value=" Edit ">
	</form>

<br>
Last edited November 14, 2003<br>
Return to <a href="http://192.168.2.114/fit/wiki.cgi?WelcomeVisitors">WelcomeVisitors</a>
</body></html>